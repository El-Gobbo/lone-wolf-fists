<form class="{{cssClass}} {{actor.type}} flexcol" autocomplete="off">

  {{!-- Sheet Header --}}
  <div class="sheet">
  <div class="sidebar-small">
    <ol class='items-list full-size'>
      <li class="prana resources">
        <div class="resource flex-group-center">
          {{#if inCombat}}
          <div>
            <button type="button" id="prana-flare">Prana Flare</button>
          </div>
          {{/if}}
          <label for="system.prana.current" class="resource-label">Prana</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input {{#unless inCombat}} class="active-prana-gen" {{else}} class="prana-gen" {{/unless}} type="text" name="system.prana.gen.outOfCombat" value="{{system.prana.gen.outOfCombat}}" data-dtype="Number" disabled/>
            <input type="text" class="flex-2" name="system.prana.current" value="{{system.prana.current}}" data-dtype="Number"/>
            <input {{#if inCombat}} class="active-prana-gen" {{else}} class="prana-gen" {{/if}} type="text" name="system.prana.gen.inCombat" value="{{system.prana.gen.inCombat}}" data-dtype="Number" disabled/>
          </div>
        </div>
        <div class="grid grid-2col grid-close">
          <div class="resource flex-group-center">
            <label for="system.pool.value" class="pool-label">Pool</label>
            <input type="text" name="system.pool.value" value="{{system.pool.value}}" data-dtype="Number"/>
          </div>
          <div class="resource flex-group-center">
            <label for="system.pool.recovery" class="pool-label">Recover</label>
            <input type="text" name="system.pool.recovery" value="{{system.pool.recovery}}" data-dtype="Number"/>
          </div>
        </div>
      </li>

      <li class="resource flex-group-center flex-column">
        <label for="system.chakras.active" class="resource-label">Chakras</label>
        <div class="active-chakras small-box">
          <input id="chakra-display" type="number" class="full-size" name="system.chakras.active" value="{{system.chakras.active}}" data-dtype="Number" readonly/>
          {{#unless (comparison system.chakras.active 7)}}
          <img
            class="chakra-increase"
            src="systems/lone-wolf-fists/assets/arrup.png"
            title='Open Chakra'
            width='10'
            height='10'
          />
          {{/unless}}
          {{#unless (comparison system.chakras.active 1)}}
          <img
            class="chakra-decrease"
            src="systems/lone-wolf-fists/assets/arrdown.png"
            title='Close Chakra'
            width='10'
            height='10'
          />
          {{/unless}}
        </div>
      </li>
    {{#each chakras as | skill | }}
    <li class='item flex-group-center'>
      <div class='item-image' data-imbtype="{{skill}}">
          <img
            class="chakra-image"
            {{#if (lookup ../system.chakras.awakened skill)}}
            src='systems/lone-wolf-fists/assets/Chakras/{{skill}} Awakened.png'
            {{else}}
            src='systems/lone-wolf-fists/assets/Chakras/{{skill}}.png'
            {{/if}}
            title='{{skill}}'
            width='40'
            height='40'
          />
      </div>
      <h4 class="skill">
        {{#if (lookup ../system.chakras.awakened skill)}}<strong>{{skill}}</strong>
        {{else}}{{skill}}
        {{/if}}
      </h4>
    </li>
    {{/each}}
  </div> 
  <div class="body">
  <header class="sheet-top">
    <div class="sidebar flex-group-center">
      <img class="profile-img flex-group-center" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="120" width="120"/>
      <div class="resources">
        <div id="effort" class="resource flex-group-center flex-column">
          <label for="power-input" class="resource-label">Ferocity</label>
          {{#if system.editMode}}
          <input id="power-input" class="small-box" type="text" name="system.power.value" value="{{system.power.value}}" data-dtype="Number">
          {{else}}
          <div id="effort-display" class="flex-group-center flex">
            <h4 id="power-input"><strong>{{system.power.value}}</strong></h4>
          </div>
          {{/if}}
        </div>
      </div>
    </div>
    <div class="header-fields position-relative flex-column">
      <div class="title">
        <h1 id="name" class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name"/></h1>
      </div>
      <div class="damage resources flexrow monster-sheet">
        <div id="health" class="flex-4 resource flex-group-center inner-margin">
          <div class="flex-4">
            <label for="health-current" class="resource-label">Health</label>
            <div id="health" class="resource-content max-min flexrow flex-group-center">
              <input id="health-current" class="stat-current" type="text" name="system.health.current" value="{{system.health.current}}" data-dtype="Number"/>
              <input id="health-max" class="stat-max" type="text" name="system.health.max" value="{{system.health.max}}" readonly disabled data-dtype="Number"/>
            </div>
          </div>
        </div>
        <div id="health-levels" class="health-levels flex-column flex-group-center">
          <label class="resource-label">Health levels</label>
          <div id="health-level-input" class=" flex-group-center flexshrink">
            <input id="health-levels" type="text" name="system.health.value" value="{{system.health.value}}" data-dtype="Number">
          </div>
        </div>
        <div class="flex-2 resource-content flex-group-center flex-between inner-margin">
          <label for="system.armorValue" class="resource-label">Armor</label>
            <div class="flex-group-center flex">
              {{#if system.editMode}}
              <input id="power-input" class="small-box" type="text" name="system.armorValue" value="{{system.armorValue}}" data-dtype="Number">
              {{else}}
              <div class="armor-icon monster-sheet flex flex-group-center">
                <img
                  class="full-size"
                  src='systems/lone-wolf-fists/assets/Armor-symbol.svg'
                  title='Armor symbol'
                  width='40'
                  height='40'
                />
                <h4 class="armor-value full-size">{{armorValue}}</h4>
              </div>
              {{/if}}
            </div>
        </div>
      </div>
      <div class="full-size edit-container">
      {{#if system.editMode}}
      <i id="edit-mode" class="fa-solid fa-gear">Play</i>
      {{else}}
      <i id="edit-mode" class="fa-solid fa-gear">Edit</i>
      {{/if}}
      </div>
    </div>
  </header>

  {{!-- Sheet Tab Navigation --}}
  <nav class="sheet-tabs tabs" data-group="primary">
    {{!-- Default tab is specified in actor-sheet.mjs --}}
    <a class="item" data-tab="description">Description</a>
    <a class="item" data-tab="items">Abilities</a>
    <a class="item" data-tab="effects">Config</a>
  </nav>

  {{!-- Sheet Body --}}
  <section class="sheet-body">

    {{!-- Biography Tab --}}
    <div class="tab biography" data-group="primary" data-tab="description">
      {{!-- Editors must receive enriched text data from getData to properly handle rolls --}}
      {{editor enrichedBiography target="system.biography" engine="prosemirror" button=true editable=editable}}
    </div>

    {{!-- Owned Items Tab --}}
    <div class="tab items" data-group="primary" data-tab="items">
       {{> "systems/lone-wolf-fists/templates/actor/parts/actor-imbalances.hbs"}}
       {{#if hasTechniques}}
       {{> "systems/lone-wolf-fists/templates/actor/parts/actor-techniques.hbs"}}
       {{/if}}
    </div>

    {{!-- Config tab --}}
    <div class="tab effects flexcol" data-group="primary" data-tab="effects">
      <input type="checkbox" class="flex" name="system.editMode"  {{#if system.editMode}}checked{{/if}} value=true>
      <label class="rightside flex">Edit core stats</label>
      <input type="checkbox" class="flex" name="system.techFacing.none"  {{#if system.techFacing.none}}checked{{/if}} value=true>
      <label class="rightside flex">No facings</label>
      <input type="checkbox" class="flex" name="system.techFacing.none"  {{#if system.techFacing.none}}checked{{/if}} value=true>
      <label class="rightside flex">No facings</label>
    </div>

  </section>
  </div>
  </div>
</form>

